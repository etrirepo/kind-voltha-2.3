2020. 10. 21. (수) 17:29:35 KST
PORTS=8181,8101,55555,5022,2379
OPTIONS
    NAME                           = minimal
    TYPE                           = minimal
    ENABLE_ONOS_EXTRANEOUS_RULES   = no
    WITH_TIMINGS                   = no
    WITH_BBSIM                     = no
    WITH_EAPOL                     = yes
    WITH_DHCP                      = yes
    WITH_IGMP                      = no
    WITH_ONOS                      = yes
    WITH_CHAOS                     = no
    WITH_ADAPTERS                  = yes
    WITH_SIM_ADAPTERS              = no
    WITH_OPEN_ADAPTERS             = yes
    WITH_PORT_FORWARDS             = yes
    JUST_K8S                       = no
    DEPLOY_K8S                     = no
    INSTALL_ONOS_APPS              = no
    INSTALL_KUBECTL                = yes
    INSTALL_HELM                   = yes
    UPDATE_HELM_REPOS              = yes
    WAIT_ON_DOWN                   = yes
    ONLY_ONE                       = yes
    VOLTHA_DOWN_ON_TIMEOUT         = no
    WAIT_TIMEOUT                   = 30m
    VOLTHA_LOG_LEVEL               = WARN
    VOLTHA_CHART                   = onf/voltha
    VOLTHA_CHART_VERSION           = 2.3.1
    VOLTHA_BBSIM_CHART             = onf/bbsim
    VOLTHA_BBSIM_CHART_VERSION     = 3.0.18
    NUM_OF_BBSIM                   = 1
    VOLTHA_ADAPTER_SIM_CHART       = onf/voltha-adapter-simulated
    VOLTHA_ADAPTER_SIM_CHART_VERSION = latest
    VOLTHA_ADAPTER_OPEN_OLT_CHART  = onf/voltha-adapter-openolt
    VOLTHA_ADAPTER_OPEN_OLT_CHART_VERSION = 2.3.1
    VOLTHA_ADAPTER_OPEN_ONU_CHART  = onf/voltha-adapter-openonu
    VOLTHA_ADAPTER_OPEN_ONU_CHART_VERSION = 2.3.0
    ONOS_CHART                     = onf/onos
    ONOS_CHART_VERSION             = 3.0.1
    ONOS_API_PORT                  = 8181
    ONOS_SSH_PORT                  = 8101
    CONFIG_SADIS                   = no
    SADIS_CFG                      = onos-files/onos-sadis-sample.json
    VOLTHA_API_PORT                = 55555
    VOLTHA_SSH_PORT                = 5022
    VOLTHA_ETCD_PORT               = 2379
    VOLTHA_KAFKA_PORT              = 9092
    VK_RELEASE                     = master
    KIND_VERSION                   = v0.5.1
    VOLTCTL_VERSION                = latest
    HELM_VERSION                   = v2.14.3
    WITH_RADIUS                    = yes
    WITH_KAFKA                     = yes
    WITH_ETCD                      = yes
INSTALL TYPE: minimal
+ helm repo update
Hang tight while we grab the latest from your chart repositories...
...Skip local chart repository
...Successfully got an update from the "incubator" chart repository
...Successfully got an update from the "onf" chart repository
...Successfully got an update from the "stable" chart repository
Update Complete.
+ helm install -f minimal-values.yaml --set defaults.log_level=WARN --namespace voltha --name etcd-operator --set defaults.image_tag=null,images.onos.tag=4.0.2 stable/etcd-operator
NAME:   etcd-operator
LAST DEPLOYED: Wed Oct 21 17:29:44 2020
NAMESPACE: voltha
STATUS: DEPLOYED

RESOURCES:
==> v1/ClusterRole
NAME                                       AGE
etcd-operator-etcd-operator-etcd-operator  0s

==> v1/ClusterRoleBinding
NAME                                       AGE
etcd-operator-etcd-operator-etcd-operator  0s

==> v1/Deployment
NAME                                       READY  UP-TO-DATE  AVAILABLE  AGE
etcd-operator-etcd-operator-etcd-operator  0/1    1           0          0s

==> v1/Pod(related)
NAME                                                       READY  STATUS             RESTARTS  AGE
etcd-operator-etcd-operator-etcd-operator-9f59bcb44-tv5m4  0/1    ContainerCreating  0         0s

==> v1/ServiceAccount
NAME                                       SECRETS  AGE
etcd-operator-etcd-operator-etcd-operator  1        0s


NOTES:
1. etcd-operator deployed.
  If you would like to deploy an etcd-cluster set 'customResources.createEtcdClusterCRD' to true in values.yaml
  Check the etcd-operator logs
    export POD=$(kubectl get pods -l app=etcd-operator-etcd-operator-etcd-operator --namespace voltha --output name)
    kubectl logs $POD --namespace=voltha
+ helm install -f minimal-values.yaml --set defaults.log_level=WARN --namespace default --name onos --version 3.0.1 --set defaults.image_tag=null,images.onos.tag=4.0.2 onf/onos
NAME:   onos
LAST DEPLOYED: Wed Oct 21 17:29:54 2020
NAMESPACE: default
STATUS: DEPLOYED

RESOURCES:
==> v1/ConfigMap
NAME       DATA  AGE
onos-onos  1     1s

==> v1/Pod(related)
NAME                   READY  STATUS             RESTARTS  AGE
onos-567d666498-rqcm2  0/1    ContainerCreating  0         1s

==> v1/Service
NAME           TYPE       CLUSTER-IP     EXTERNAL-IP  PORT(S)         AGE
onos-debugger  NodePort   10.108.81.71   <none>       5005:30555/TCP  1s
onos-openflow  NodePort   10.108.58.205  <none>       6653:31653/TCP  1s
onos-ovsdb     ClusterIP  10.111.66.32   <none>       6640/TCP        1s
onos-ssh       NodePort   10.110.134.43  <none>       8101:30115/TCP  1s
onos-ui        NodePort   10.109.176.51  <none>       8181:30120/TCP  1s

==> v1beta2/Deployment
NAME  READY  UP-TO-DATE  AVAILABLE  AGE
onos  0/1    1           0          1s


+ _TAG=onos-ui-minimal
+ bash -c 'while true; do kubectl port-forward --address 0.0.0.0 -n default service/onos-ui 8181:8181; done'
+ _TAG=onos-ssh-minimal
+ bash -c 'while true; do kubectl port-forward --address 0.0.0.0 -n default service/onos-ssh 8101:8101; done'
+ mkdir -p ./onos-files
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
curl: (7) Failed to connect to 127.0.0.1 port 8181: 연결이 거부됨
Forwarding from 0.0.0.0:8181 -> 8181
Forwarding from 0.0.0.0:8101 -> 8101
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
E1021 17:30:03.404973   19706 portforward.go:400] an error occurred forwarding 8181 -> 8181: error forwarding port 8181 to pod 1d302e749d3b36a5b1225402262c1b26e170204fae623245b388eb8dc8323ff9, uid : exit status 1: 2020/10/21 17:30:03 socat[19812] E connect(5, AF=2 127.0.0.1:8181, 16): Connection refused
curl: (52) Empty reply from server
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
E1021 17:30:04.453427   19706 portforward.go:400] an error occurred forwarding 8181 -> 8181: error forwarding port 8181 to pod 1d302e749d3b36a5b1225402262c1b26e170204fae623245b388eb8dc8323ff9, uid : exit status 1: 2020/10/21 17:30:04 socat[19834] E connect(5, AF=2 127.0.0.1:8181, 16): Connection refused
curl: (52) Empty reply from server
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
E1021 17:30:05.493854   19706 portforward.go:400] an error occurred forwarding 8181 -> 8181: error forwarding port 8181 to pod 1d302e749d3b36a5b1225402262c1b26e170204fae623245b388eb8dc8323ff9, uid : exit status 1: 2020/10/21 17:30:05 socat[19846] E connect(5, AF=2 127.0.0.1:8181, 16): Connection refused
curl: (52) Empty reply from server
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
E1021 17:30:06.533247   19706 portforward.go:400] an error occurred forwarding 8181 -> 8181: error forwarding port 8181 to pod 1d302e749d3b36a5b1225402262c1b26e170204fae623245b388eb8dc8323ff9, uid : exit status 1: 2020/10/21 17:30:06 socat[19927] E connect(5, AF=2 127.0.0.1:8181, 16): Connection refused
curl: (52) Empty reply from server
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
E1021 17:30:07.585608   19706 portforward.go:400] an error occurred forwarding 8181 -> 8181: error forwarding port 8181 to pod 1d302e749d3b36a5b1225402262c1b26e170204fae623245b388eb8dc8323ff9, uid : exit status 1: 2020/10/21 17:30:07 socat[19976] E connect(5, AF=2 127.0.0.1:8181, 16): Connection refused
curl: (52) Empty reply from server
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 404 Not Found
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 404 Not Found
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 404 Not Found
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 404 Not Found
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 404 Not Found
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ grep ACTIVE
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ grep ACTIVE
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
+ curl --fail -sSL --user karaf:karaf -X GET http://127.0.0.1:8181/onos/v1/applications/org.opencord.kafka
+ grep ACTIVE
Handling connection for 8181
curl: (22) The requested URL returned error: 503 Service Unavailable
